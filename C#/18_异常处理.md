# C# 异常处理

- 异常提供了一种把程序控制权从某个部分转移到另一个部分的方式。C# 异常处理时建立在四个关键词之上的：try、catch、finally 和 throw。

  - try：一个 try 块标识了一个将被激活的特定的异常的代码块。后跟一个或多个 catch 块。
  - catch：程序通过异常处理程序捕获异常。catch 关键字表示异常的捕获。
  - finally：finally 块用于执行给定的语句，不管异常是否被抛出都会执行。例如，如果您打开一个文件，不管是否出现异常文件都要被关闭。
  - throw：当问题出现时，程序抛出一个异常。使用 throw 关键字来完成。


## C# 中的异常类

- C# 异常是使用类来表示的。C# 中的异常类主要是直接或间接地派生于 System.Exception 类。

| 异常类 | 描述 |
| --- | --- |
| System.Exception | 所有异常的基类。 |
| System.IO.IOException | 输入/输出异常。 |
| System.IndexOutOfRangeException | 索引超出范围。 |
| System.ArrayTypeMismatchException | 数组类型不匹配。 |
| System.NullReferenceException | 对象引用为空。 |
| System.DivideByZeroException | 除数为零。 |
| System.InvalidCastException | 类型转换失败。 |
| System.OutOfMemoryException | 内存不足。 |
| System.StackOverflowException | 栈溢出。 |

## 创建用户自定义异常

- 通过继承 System.Exception 类，您可以创建自定义异常。

```csharp
public class MyException : Exception
{
    public MyException(string message) : base(message) { }
}
```

## 抛出对象

- 通过 throw 关键字，您可以抛出异常对象。

```csharp
throw new MyException("An error occurred.");
```