# C# 数据类型



- 在 C# 中，变量分为以下几种类型：

  - 值类型（Value types）
  - 引用类型（Reference types）
  - 指针类型（Pointer types）


## 值类型（Value types）

- 值类型变量可以直接分配给一个值。它们是从类 System.ValueType 中派生的。
- 下表列出了 C# 2010 中可用的值类型：

| 类型 | 描述 | 范围 | 默认值 |
| --- | --- | --- | --- |
| bool | 布尔值 | true 或 false | false |
| byte | 无符号 8 位整数 | 0 到 255 | 0 |
| char | Unicode 字符 | Unicode | '\u0000' |
| decimal | 有限小数 | -79228162514264337593543950335 到 79228162514264337593543950335 | 0 |
| double | 双精度浮点数 | -1.7976931348623157E+308 到 1.7976931348623157E+308 | 0 |
| float | 单精度浮点数 | -3.4028234663852886E+38 到 3.4028234663852886E+38 | 0 |
| int | 有符号 32 位整数 | -2147483648 到 2147483647 | 0 |
| long | 有符号 64 位整数 | -9223372036854775808 到 9223372036854775807 | 0 |
| sbyte | 有符号 8 位整数 | -128 到 127 | 0 |
| short | 有符号 16 位整数 | -32768 到 32767 | 0 |
| uint | 无符号 32 位整数 | 0 到 4294967295 | 0 |
| ulong | 无符号 64 位整数 | 0 到 18446744073709551615 | 0 |
| ushort | 无符号 16 位整数 | 0 到 65535 | 0 |

## 引用类型（Reference types）

- 引用类型不包含存储在变量中的实际数据，但它们包含对变量的引用。

### 对象（Object）类型

- 对象（Object）类型 是 C# 通用类型系统（Common Type System - CTS）中所有数据类型的终极基类。

```csharp
object obj;
obj = 100; // 这是装箱操作
```

### 动态（Dynamic）类型

- 您可以存储任何类型的值在动态数据类型变量中。这些变量的类型检查是在运行时发生的。

```csharp
dynamic <variable_name> = value;
```
- 动态类型与对象类型相似，但是对象类型变量的类型检查是在编译时发生的，而动态类型变量的类型检查是在运行时发生的。

### 字符串（String）类型

- 字符串（String）类型是对象类型的子类，它是用于表示文本的数据类型。

```csharp
string <variable_name> = value;
```

### C# string 字符串的前面可以加 @（称作"逐字字符串"）将转义字符（\）当作普通字符对待，比如：

```csharp
string str = @"C:\Program Files";
```

## 指针类型（Pointer types）


- 指针类型是用于存储内存地址的数据类型。

```csharp
int* variable_name;
```

- 使用指针检索数据值

```csharp
int x = 10;
int* p = &x;
Console.WriteLine("Data is: {0} " , p->ToString());
```

- 传递指针作为方法的参数

```csharp
public unsafe void swap(int* p, int *q)
{
    int temp = *p;
    *p = *q;
    *q = temp;
}

public unsafe static void Main()
{
    TestPointer p = new TestPointer();
    int var1 = 10;
    int var2 = 20;
    int* x = &var1;
    int* y = &var2;
    
    Console.WriteLine("Before Swap: var1:{0}, var2: {1}", var1, var2);
    p.swap(x, y);

    Console.WriteLine("After Swap: var1:{0}, var2: {1}", var1, var2);
    Console.ReadKey();
}
```

- 使用指针访问数组元素

```csharp
int[] arr = {1, 2, 3, 4, 5};
fixed (int* p = arr)

for (int i = 0; i < 5; i++)
{
    Console.WriteLine("Address of arr[{0}] is {1}", i, (int)arr[p + i]);
    Console.WriteLine("Value of arr[{0}] is {1}", i, *(p + i));
}
Console.ReadKey();
```

## 编译不安全代码

- 为了编译不安全代码，您必须切换到命令行编译器指定 /unsafe 命令行。

```csharp
csc /unsafe Program.cs
```